!function(e){e.hasInitialized||(e.copyToClipboard=function(e){document.getElementById(e).select(),document.execCommand("Copy")},function(){var o,i,r,a=!1;e.combinationsUpdate=function(){if(o){var e=document.getElementById("combinations-table-filter-talents").value,n=new RegExp("^"+e.replace(new RegExp("x|\\*","ig"),"[0-3]"),"i"),l=i.val(),s=r.val(),c=$.grep(o,function(t){if(""!==e&&!n.test(t[1]))return!1;if(l.indexOf(t[2])<0)return!1;var o=t[3].split(", ");return!($(s).filter(o).length<o.length&&"None"!==t[3])}),d=document.getElementById("combinations-table-data"),u=$(document.getElementById("combinations-table-nav"));u.data("twbs-pagination")&&u.twbsPagination("destroy"),u.twbsPagination({totalPages:Math.max(1,Math.ceil(c.length/15)),visiblePages:3,onPageClick:function(e,o){var n="";c.slice(15*(o-1),15*o).forEach(function(e){n+="<tr>",n+="<td>"+e[0]+"</td>",n+="<td>"+e[1]+"</td>",n+="<td>"+e[2]+"</td>",n+="<td>"+e[3]+"</td>",n+="<td>"+t(e[4])+"</td>",a&&(n+="<td>",6===e.length&&(n+=t(e[5])),n+="</td>"),n+="</tr>"}),d.innerHTML=n}})}},e.combinationsInit=function(t){$.get("/"+t,function(t){var l,s=[],c=[];(o=t).forEach(function(e){$.inArray(e[2],s)<0&&s.push(e[2]),e[3].split(", ").forEach(function(e){"None"!==e&&$.inArray(e,c)<0&&c.push(e)}),a||6!==e.length||(a=!0)}),s.sort().reverse(),s.forEach(function(e){document.getElementById("combinations-table-filter-sets").insertAdjacentHTML("beforeend","<option>"+e+"</option>")}),(i=$("#combinations-table-filter-sets")).selectpicker("val",s),i.selectpicker("refresh"),c.sort(),c.forEach(function(e){document.getElementById("combinations-table-filter-legendaries").insertAdjacentHTML("beforeend","<option>"+e+"</option>")}),r=$("#combinations-table-filter-legendaries"),(l=c.indexOf("Cinidaria"))>-1&&c.splice(l,1),r.selectpicker("val",c),r.selectpicker("refresh"),a&&(document.getElementById("combinations-table-headers").insertAdjacentHTML("beforeend","<th>Boss DPS</th>"),document.getElementById("combinations-table-filters").insertAdjacentHTML("beforeend","<th></th>")),e.combinationsUpdate(),n()})}}(),e.relicsInit=function(e,r){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){$.get("/"+e,function(e){var a,l;(e=new google.visualization.arrayToDataTable(e)).sort({column:5,desc:!0});var s=["Weapon Item Level","% DPS Gain"];for(i=0;i<s.length;i++)for(l=0;l<e.getNumberOfRows();l++)if(e.getValue(l,0)==s[i]){if(0!=l){for(e.insertRows(0,1),l+=1,e.setRowProperties(0,e.getRowProperties(l)),a=0;a<e.getNumberOfColumns();a++)e.setValue(0,a,e.getValue(l,a));e.removeRow(l)}break}for(a=2;a<e.getNumberOfColumns();a+=2)e.setColumnProperties(a,{type:"string",role:"annotation"});for(a=3;a<=e.getNumberOfColumns();a+=4)e.insertColumn(a,{type:"string",role:"tooltip",p:{html:!0}}),e.insertColumn(a+1,{type:"string",role:"style"});var c=["Light Speed","Infusion of Light","Secure in the Light","Shocklight"],d=["Master of Shadows","Murderous Intent","Shadowbind","Torment the Weak","Chaotic Darkness","Dark Sorrows"];for(l=0;l<e.getNumberOfRows();l++){var u="";$.inArray(e.getValue(l,0),c)>=0?u="stroke-width: 4; stroke-color: #bb8800; color: #ffcc00":$.inArray(e.getValue(l,0),d)>=0&&(u="stroke-width: 4; stroke-color: #5500aa; color: #8800ff");var g=0;for(a=1;a<e.getNumberOfColumns();a+=4){var m=e.getValue(l,a),f=m-g,b='<div class="chart-tooltip"><b>'+e.getValue(l,a+1)+"x "+e.getValue(l,0)+"</b><br><b>Total:</b> "+t(m.toFixed())+"<br><b>Increase:</b> "+t(f.toFixed())+"</div>";e.setValue(l,a+2,b),e.setValue(l,a+3,u),e.setValue(l,a,f),f<0&&(e.setValue(l,a,0),e.setValue(l,a+1,"")),g=m>g?m:g}}var h=e.addColumn("number");for(l=0;l<e.getNumberOfRows();l++)$.inArray(e.getValue(l,0),c)>=0||$.inArray(e.getValue(l,0),d)>=0?e.setValue(l,h,1):e.setValue(l,h,0);e.sort([{column:h,desc:!1}]),e.removeColumn(h);var p=document.getElementById("fightstyle-tabs"),C=p.innerWidth-2*window.getComputedStyle(p,null).getPropertyValue("padding-left"),v=document.documentElement.clientWidth>=768?C:700,w="#CCC",y={title:r,backgroundColor:"#222",chartArea:{top:50,bottom:100,left:150,right:50},hAxis:{gridlines:{count:20},format:"short",textStyle:{color:w},title:"DPS Increase",titleTextStyle:{color:w},viewWindowMode:"maximized",viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:w},titleTextStyle:{color:w}},annotations:{textStyle:{fontSize:10},alwaysOutside:!0,stem:{length:-10,color:"transparent"}},titleTextStyle:{color:w},tooltip:{isHtml:!0},legend:{position:"none"},isStacked:!0,width:v};new google.visualization.BarChart(document.getElementById("google-chart")).draw(o(e),y),n()})})},e.trinketsInit=function(e,i){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){$.get("/"+e,function(e){var r,a,l=(e=new google.visualization.arrayToDataTable(e)).addColumn("number");for(a=0;a<e.getNumberOfRows();a++){var s=0;for(r=1;r<l;r++)e.getValue(a,r)>s&&(s=e.getValue(a,r));e.setValue(a,l,s)}for(e.sort([{column:l,desc:!0}]),e.removeColumn(l),r=2;r<=e.getNumberOfColumns();r+=2)e.insertColumn(r,{type:"string",role:"tooltip",p:{html:!0}});for(a=0;a<e.getNumberOfRows();a++){var c=0;for(r=1;r<e.getNumberOfColumns();r+=2){var d=e.getValue(a,r),u=d-c,g='<div class="chart-tooltip"><b>'+e.getValue(a,0)+"<br> Item Level "+e.getColumnLabel(r)+"</b><br><b>Total:</b> "+t(d.toFixed())+"<br><b>Increase:</b> "+t(u.toFixed())+"</div>";e.setValue(a,r+1,g),e.setValue(a,r,u),c=d>c?d:c}}var m=document.getElementById("fightstyle-tabs"),f=m.innerWidth-2*window.getComputedStyle(m,null).getPropertyValue("padding-left"),b=document.documentElement.clientWidth>=768?f:700,h={title:i,backgroundColor:"#222",chartArea:{top:50,bottom:100,right:150,left:200},hAxis:{gridlines:{count:20},format:"short",textStyle:{color:"#CCC"},title:"DPS Increase",titleTextStyle:{color:"#CCC"},viewWindowMode:"maximized",viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:"#CCC"},titleTextStyle:{color:"#CCC"}},legend:{textStyle:{color:"#CCC"}},titleTextStyle:{color:"#CCC"},tooltip:{isHtml:!0},isStacked:!0,width:b};new google.visualization.BarChart(document.getElementById("google-chart")).draw(o(e),h),n()})})},e.hasInitialized=!0,window.herodamage=e);function t(e){return new Intl.NumberFormat("en-US").format(e)}function o(e){var t=new google.visualization.DataView(e),o=t.getFilteredRows([{column:1,value:null}]);return t.hideRows(o),t.toDataTable()}function n(){var e=document.getElementById("herodamage-loading");e.parentNode.removeChild(e)}}(window.herodamage||{});