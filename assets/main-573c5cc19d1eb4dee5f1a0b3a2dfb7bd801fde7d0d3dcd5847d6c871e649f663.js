!function(e){e.hasInitialized||(e.copyToClipboard=function(e){document.getElementById(e).select(),document.execCommand("Copy")},function(){var n,r,i,a=!1;e.combinationsUpdate=function(){if(n){var e=document.getElementById("combinations-table-filter-talents").value,o=new RegExp("^"+e.replace(new RegExp("x|\\*","ig"),"[0-3]"),"i"),l=r.val(),s=i.val(),c=$.grep(n,function(t){if(""!==e&&!o.test(t[1]))return!1;if(l.indexOf(t[2])<0)return!1;var n=t[3].split(", ");return!($(s).filter(n).length<n.length&&"None"!==t[3])}),d=document.getElementById("combinations-table-data"),u=$(document.getElementById("combinations-table-nav"));u.data("twbs-pagination")&&u.twbsPagination("destroy"),u.twbsPagination({totalPages:Math.max(1,Math.ceil(c.length/15)),visiblePages:3,onPageClick:function(e,o){var n="";c.slice(15*(o-1),15*o).forEach(function(e){n+="<tr>",n+="<td>"+e[0]+"</td>",n+="<td>"+e[1]+"</td>",n+="<td>"+e[2]+"</td>",n+="<td>"+e[3]+"</td>",n+="<td>"+t(e[4])+"</td>",a&&(n+="<td>",6===e.length&&(n+=t(e[5])),n+="</td>"),n+="</tr>"}),d.innerHTML=n}})}},e.combinationsInit=function(t){$.get("/"+t,function(t){var l,s=[],c=[];(n=t).forEach(function(e){$.inArray(e[2],s)<0&&s.push(e[2]),e[3].split(", ").forEach(function(e){"None"!==e&&$.inArray(e,c)<0&&c.push(e)}),a||6!==e.length||(a=!0)}),s.sort().reverse(),s.forEach(function(e){document.getElementById("combinations-table-filter-sets").insertAdjacentHTML("beforeend","<option>"+e+"</option>")}),(r=$("#combinations-table-filter-sets")).selectpicker("val",s),r.selectpicker("refresh"),c.sort(),c.forEach(function(e){document.getElementById("combinations-table-filter-legendaries").insertAdjacentHTML("beforeend","<option>"+e+"</option>")}),i=$("#combinations-table-filter-legendaries"),(l=c.indexOf("Cinidaria"))>-1&&c.splice(l,1),i.selectpicker("val",c),i.selectpicker("refresh"),a&&(document.getElementById("combinations-table-headers").insertAdjacentHTML("beforeend","<th>Boss DPS</th>"),document.getElementById("combinations-table-filters").insertAdjacentHTML("beforeend","<th></th>")),e.combinationsUpdate(),o()})}}(),e.relicsInit=function(e,r){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){$.get("/"+e,function(e){var i,a;(e=new google.visualization.arrayToDataTable(e)).sort({column:5,desc:!0});var l=["Weapon Item Level","% DPS Gain"];for(e=function(e,t){var o,n,r;for(o=0;o<t.length;o++)for(r=0;r<e.getNumberOfRows();r++)if(e.getValue(r,0)==t[o]){if(0!=r){for(e.insertRows(0,1),r+=1,e.setRowProperties(0,e.getRowProperties(r)),n=0;n<e.getNumberOfColumns();n++)e.setValue(0,n,e.getValue(r,n));e.removeRow(r)}break}return e}(e,l),i=2;i<e.getNumberOfColumns();i+=2)e.setColumnProperties(i,{type:"string",role:"annotation"});for(i=3;i<=e.getNumberOfColumns();i+=4)e.insertColumn(i,{type:"string",role:"tooltip",p:{html:!0}}),e.insertColumn(i+1,{type:"string",role:"style"});var s=["Light Speed","Infusion of Light","Secure in the Light","Shocklight"],c=["Master of Shadows","Murderous Intent","Shadowbind","Torment the Weak","Chaotic Darkness","Dark Sorrows"];for(a=0;a<e.getNumberOfRows();a++){var d="",u=e.getValue(a,0);u==l[1]?d="stroke-width: 1; stroke-color: #808080; color: #b3b3b3":u==l[0]?d="stroke-width: 0.5; stroke-color: #4d4d4d; color: #808080":$.inArray(u,s)>=0?d="stroke-width: 3; stroke-color: #bb8800; color: #ffcc00":$.inArray(u,c)>=0&&(d="stroke-width: 3; stroke-color: #5500aa; color: #8800ff");var m=0;for(i=1;i<e.getNumberOfColumns();i+=4){var g=e.getValue(a,i),f=g-m,b='<div class="chart-tooltip"><b>'+e.getValue(a,i+1)+"x "+u+"</b><br><b>Total:</b> "+t(g.toFixed())+"<br><b>Increase:</b> "+t(f.toFixed())+"</div>";e.setValue(a,i+2,b),e.setValue(a,i+3,d),e.setValue(a,i,f),f<0&&(e.setValue(a,i,0),e.setValue(a,i+1,"")),m=g>m?g:m}}var h=e.addColumn("number");for(a=0;a<e.getNumberOfRows();a++)$.inArray(e.getValue(a,0),s)>=0||$.inArray(e.getValue(a,0),c)>=0?e.setValue(a,h,1):e.setValue(a,h,0);e.sort([{column:h,desc:!1}]),e.removeColumn(h);var p=document.getElementById("simulations-metas"),v=p.innerWidth-2*window.getComputedStyle(p,null).getPropertyValue("padding-left"),w=document.documentElement.clientWidth>=768?v:700,y="#cccccc",C={title:r,backgroundColor:"#222222",chartArea:{top:50,bottom:100,left:150,right:50},hAxis:{gridlines:{count:20},format:"short",textStyle:{color:y},title:"DPS Increase",titleTextStyle:{color:y},viewWindowMode:"maximized",viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:y},titleTextStyle:{color:y}},annotations:{highContrast:!1,stem:{color:"transparent",length:-12},textStyle:{fontName:'"Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:10,bold:!0,color:"#222222",auraColor:"transparent"}},titleTextStyle:{color:y},tooltip:{isHtml:!0},legend:{position:"none"},isStacked:!0,width:w};new google.visualization.BarChart(document.getElementById("google-chart")).draw(n(e),C),o()})})},e.trinketsInit=function(e,r){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){$.get("/"+e,function(e){var i,a,l=(e=new google.visualization.arrayToDataTable(e)).addColumn("number");for(a=0;a<e.getNumberOfRows();a++){var s=0;for(i=1;i<l;i++)e.getValue(a,i)>s&&(s=e.getValue(a,i));e.setValue(a,l,s)}for(e.sort([{column:l,desc:!0}]),e.removeColumn(l),i=2;i<=e.getNumberOfColumns();i+=2)e.insertColumn(i,{type:"string",role:"tooltip",p:{html:!0}});for(a=0;a<e.getNumberOfRows();a++){var c=0;for(i=1;i<e.getNumberOfColumns();i+=2){var d=e.getValue(a,i),u=d-c,m='<div class="chart-tooltip"><b>'+e.getValue(a,0)+"<br> Item Level "+e.getColumnLabel(i)+"</b><br><b>Total:</b> "+t(d.toFixed())+"<br><b>Increase:</b> "+t(u.toFixed())+"</div>";e.setValue(a,i+1,m),e.setValue(a,i,u),c=d>c?d:c}}var g=document.getElementById("simulations-metas"),f=g.innerWidth-2*window.getComputedStyle(g,null).getPropertyValue("padding-left"),b=document.documentElement.clientWidth>=768?f:700,h="#cccccc",p={title:r,backgroundColor:"#222222",chartArea:{top:50,bottom:100,right:150,left:200},hAxis:{gridlines:{count:20},format:"short",textStyle:{color:h},title:"DPS Increase",titleTextStyle:{color:h},viewWindowMode:"maximized",viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:h},titleTextStyle:{color:h}},legend:{textStyle:{color:h}},titleTextStyle:{color:h},tooltip:{isHtml:!0},isStacked:!0,width:b};new google.visualization.BarChart(document.getElementById("google-chart")).draw(n(e),p),o()})})},e.hasInitialized=!0,window.herodamage=e);function t(e){return new Intl.NumberFormat("en-US").format(e)}function o(){var e=document.getElementById("herodamage-loading");e.parentNode.removeChild(e)}function n(e){var t=new google.visualization.DataView(e),o=t.getFilteredRows([{column:1,value:null}]);return t.hideRows(o),t.toDataTable()}}(window.herodamage||{});