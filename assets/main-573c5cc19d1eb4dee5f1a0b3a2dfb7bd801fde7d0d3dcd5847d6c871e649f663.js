!function(e){var t,o,n,r;e.hasInitialized||(e.copyToClipboard=function(e){document.getElementById(e).select(),document.execCommand("Copy")},r=!1,e.combinationsUpdate=function(){if(t){var e=document.getElementById("combinations-table-filter-talents").value,i=new RegExp("^"+e.replace(new RegExp("x|\\*","ig"),"[0-3]"),"i"),l=o.val(),s=n.val(),c=$.grep(t,function(t){if(""!==e&&!i.test(t[1]))return!1;if(l.indexOf(t[2])<0)return!1;var o=t[3].split(", ");return!($(s).filter(o).length<o.length&&"None"!==t[3])}),d=document.getElementById("combinations-table-data"),u=$(document.getElementById("combinations-table-nav"));u.data("twbs-pagination")&&u.twbsPagination("destroy"),u.twbsPagination({totalPages:Math.max(1,Math.ceil(c.length/15)),visiblePages:3,onPageClick:function(e,t){var o="";c.slice(15*(t-1),15*t).forEach(function(e){o+="<tr>",o+="<td>"+e[0]+"</td>",o+="<td>"+e[1]+"</td>",o+="<td>"+e[2]+"</td>",o+="<td>"+e[3]+"</td>",o+="<td>"+a(e[4])+"</td>",r&&(o+="<td>",6===e.length&&(o+=a(e[5])),o+="</td>"),o+="</tr>"}),d.innerHTML=o}})}},e.combinationsInit=function(a){$.get("/"+a,function(a){var l,s=[],c=[];(t=a).forEach(function(e){$.inArray(e[2],s)<0&&s.push(e[2]),e[3].split(", ").forEach(function(e){"None"!==e&&$.inArray(e,c)<0&&c.push(e)}),r||6!==e.length||(r=!0)}),s.sort().reverse(),s.forEach(function(e){document.getElementById("combinations-table-filter-sets").insertAdjacentHTML("beforeend","<option>"+e+"</option>")}),(o=$("#combinations-table-filter-sets")).selectpicker("val",s),o.selectpicker("refresh"),c.sort(),c.forEach(function(e){document.getElementById("combinations-table-filter-legendaries").insertAdjacentHTML("beforeend","<option>"+e+"</option>")}),n=$("#combinations-table-filter-legendaries"),(l=c.indexOf("Cinidaria"))>-1&&c.splice(l,1),n.selectpicker("val",c),n.selectpicker("refresh"),r&&(document.getElementById("combinations-table-headers").insertAdjacentHTML("beforeend","<th>Boss DPS</th>"),document.getElementById("combinations-table-filters").insertAdjacentHTML("beforeend","<th></th>")),e.combinationsUpdate(),i()})},e.relicsInit=function(e,t){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){$.get("/"+e,function(e){var o,n;(e=new google.visualization.arrayToDataTable(e)).sort({column:5,desc:!0});var r=["Weapon Item Level","% DPS Gain"];for(e=function(e,t){var o,n,r;for(o=0;o<t.length;o++)for(r=0;r<e.getNumberOfRows();r++)if(e.getValue(r,0)==t[o]){if(0!=r){for(e.insertRows(0,1),r+=1,e.setRowProperties(0,e.getRowProperties(r)),n=0;n<e.getNumberOfColumns();n++)e.setValue(0,n,e.getValue(r,n));e.removeRow(r)}break}return e}(e,r),o=2;o<e.getNumberOfColumns();o+=2)e.setColumnProperties(o,{type:"string",role:"annotation"});for(o=3;o<=e.getNumberOfColumns();o+=4)e.insertColumn(o,{type:"string",role:"tooltip",p:{html:!0}}),e.insertColumn(o+1,{type:"string",role:"style"});var s=["Light Speed","Infusion of Light","Secure in the Light","Shocklight"],c=["Master of Shadows","Murderous Intent","Shadowbind","Torment the Weak","Chaotic Darkness","Dark Sorrows"];for(n=0;n<e.getNumberOfRows();n++){var d="",u=e.getValue(n,0);u==r[1]?d="stroke-width: 1; stroke-color: #808080; color: #b3b3b3":u==r[0]?d="stroke-width: 0.5; stroke-color: #4d4d4d; color: #808080":$.inArray(u,s)>=0?d="stroke-width: 3; stroke-color: #bb8800; color: #ffcc00":$.inArray(u,c)>=0&&(d="stroke-width: 3; stroke-color: #5500aa; color: #8800ff");var m=0;for(o=1;o<e.getNumberOfColumns();o+=4){var g=e.getValue(n,o),f=g-m,b='<div class="chart-tooltip"><b>'+e.getValue(n,o+1)+"x "+u+"</b><br><b>Total:</b> "+a(g.toFixed())+"<br><b>Increase:</b> "+a(f.toFixed())+"</div>";e.setValue(n,o+2,b),e.setValue(n,o+3,d),e.setValue(n,o,f),f<0&&(e.setValue(n,o,0),e.setValue(n,o+1,"")),m=g>m?g:m}}var h=e.addColumn("number");for(n=0;n<e.getNumberOfRows();n++)$.inArray(e.getValue(n,0),s)>=0||$.inArray(e.getValue(n,0),c)>=0?e.setValue(n,h,1):e.setValue(n,h,0);e.sort([{column:h,desc:!1}]),e.removeColumn(h);var p=document.getElementById("simulations-metas"),v=p.innerWidth-2*window.getComputedStyle(p,null).getPropertyValue("padding-left"),w=document.documentElement.clientWidth>=768?v:700,y="#cccccc",C={title:t,backgroundColor:"#222222",chartArea:{top:50,bottom:100,left:150,right:50},hAxis:{gridlines:{count:20},format:"short",textStyle:{color:y},title:"DPS Increase",titleTextStyle:{color:y},viewWindowMode:"maximized",viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:y},titleTextStyle:{color:y}},annotations:{highContrast:!1,stem:{color:"transparent",length:-12},textStyle:{fontName:'"Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:10,bold:!0,color:"#222222",auraColor:"transparent"}},titleTextStyle:{color:y},tooltip:{isHtml:!0},legend:{position:"none"},isStacked:!0,width:w};new google.visualization.BarChart(document.getElementById("google-chart")).draw(l(e),C),i()})})},e.trinketsInit=function(e,t){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){$.get("/"+e,function(e){var o,n,r=(e=new google.visualization.arrayToDataTable(e)).addColumn("number");for(n=0;n<e.getNumberOfRows();n++){var s=0;for(o=1;o<r;o++)e.getValue(n,o)>s&&(s=e.getValue(n,o));e.setValue(n,r,s)}for(e.sort([{column:r,desc:!0}]),e.removeColumn(r),o=2;o<=e.getNumberOfColumns();o+=2)e.insertColumn(o,{type:"string",role:"tooltip",p:{html:!0}});for(n=0;n<e.getNumberOfRows();n++){var c=0;for(o=1;o<e.getNumberOfColumns();o+=2){var d=e.getValue(n,o),u=d-c,m='<div class="chart-tooltip"><b>'+e.getValue(n,0)+"<br> Item Level "+e.getColumnLabel(o)+"</b><br><b>Total:</b> "+a(d.toFixed())+"<br><b>Increase:</b> "+a(u.toFixed())+"</div>";e.setValue(n,o+1,m),e.setValue(n,o,u),c=d>c?d:c}}var g=document.getElementById("simulations-metas"),f=g.innerWidth-2*window.getComputedStyle(g,null).getPropertyValue("padding-left"),b=document.documentElement.clientWidth>=768?f:700,h="#cccccc",p={title:t,backgroundColor:"#222222",chartArea:{top:50,bottom:100,right:150,left:200},hAxis:{gridlines:{count:20},format:"short",textStyle:{color:h},title:"DPS Increase",titleTextStyle:{color:h},viewWindowMode:"maximized",viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:h},titleTextStyle:{color:h}},legend:{textStyle:{color:h}},titleTextStyle:{color:h},tooltip:{isHtml:!0},isStacked:!0,width:b};new google.visualization.BarChart(document.getElementById("google-chart")).draw(l(e),p),i()})})},e.hasInitialized=!0,window.herodamage=e);function a(e){return new Intl.NumberFormat("en-US").format(e)}function i(){var e=document.getElementById("herodamage-loading");e.parentNode.removeChild(e)}function l(e){var t=new google.visualization.DataView(e),o=t.getFilteredRows([{column:1,value:null}]);return t.hideRows(o),t.toDataTable()}}(window.herodamage||{});