!function(e){var t,o,n,r,i;e.hasInitialized||(e.copyToClipboard=function(e){document.getElementById(e).select(),document.execCommand("Copy")},r=0,i=!1,e.combinationsUpdate=function(){if(t){var e=document.getElementById("combinations-table-filter-talents").value,a=new RegExp("^"+e.replace(new RegExp("x|\\*","ig"),"[0-3]"),"i"),c=o.val(),s=n.val(),d=$.grep(t,function(t){if(""!==e&&!a.test(t[1]))return!1;if(c.indexOf(t[2])<0)return!1;var o=t[3].split(", ");return!($(s).filter(o).length<o.length&&"None"!==t[3])}),u=document.getElementById("combinations-table-data"),g=$(document.getElementById("combinations-table-nav"));g.data("twbs-pagination")&&g.twbsPagination("destroy"),g.twbsPagination({totalPages:Math.max(1,Math.ceil(d.length/15)),visiblePages:3,onPageClick:function(e,t){var o="";d.slice(15*(t-1),15*t).forEach(function(e){o+="<tr>",o+="<td>"+e[0]+"</td>",o+="<td>"+e[1]+"</td>",o+="<td>"+e[2]+"</td>",o+="<td>"+e[3]+"</td>",o+="<td>"+l(e[4])+"</td>",i&&(o+="<td>",6===e.length&&(o+=l(e[5])),o+="</td>"),e[4]==r?o+="<td></td>":o+="<td>"+(100*e[4]/r-100).toFixed(1)+"%</td>",o+="</tr>"}),u.innerHTML=o}})}},e.combinationsInit=function(l){$.get("/"+l,function(l){var c,s=[],d=[];(t=l).forEach(function(e){$.inArray(e[2],s)<0&&s.push(e[2]),e[3].split(", ").forEach(function(e){"None"!==e&&$.inArray(e,d)<0&&d.push(e)}),e[4]>r&&(r=e[4]),i||6!==e.length||(i=!0)}),s.sort().reverse(),s.forEach(function(e){document.getElementById("combinations-table-filter-sets").insertAdjacentHTML("beforeend","<option>"+e+"</option>")}),(o=$("#combinations-table-filter-sets")).selectpicker("val",s),o.selectpicker("refresh"),d.sort(),d.forEach(function(e){document.getElementById("combinations-table-filter-legendaries").insertAdjacentHTML("beforeend","<option>"+e+"</option>")}),n=$("#combinations-table-filter-legendaries"),(c=d.indexOf("Cinidaria"))>-1&&d.splice(c,1),n.selectpicker("val",d),n.selectpicker("refresh");var u=document.getElementById("combinations-table-headers"),g=document.getElementById("combinations-table-filters");i&&(u.insertAdjacentHTML("beforeend","<th>Boss DPS</th>"),g.insertAdjacentHTML("beforeend","<th></th>")),u.insertAdjacentHTML("beforeend","<th></th>"),g.insertAdjacentHTML("beforeend","<th></th>"),e.combinationsUpdate(),a()})},e.racesInit=function(e,t,o){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){$.get("/"+e,function(e){var n;(e=new google.visualization.arrayToDataTable(e)).sort({column:1,desc:!0}),e.insertColumn(2,{type:"string",role:"tooltip",p:{html:!0}}),e.insertColumn(3,{type:"string",role:"style"});var r=["Human","Dwarf","Night Elf","Gnome","Worgen","Draenei","Lightforged Draenei","Void Elf"],i=["Orc","Troll","Tauren","Goblin","Undead","Blood Elf","Highmountain Tauren","Nightborne"];for(n=0;n<e.getNumberOfRows();n++){var d="",u=e.getValue(n,0);d=$.inArray(u,r)>=0?"stroke-width: 3; stroke-color: #1144AA; color: #3366CC":$.inArray(u,i)>=0?"stroke-width: 3; stroke-color: #770000; color: #AA0000":"stroke-width: 3; stroke-color: #4d4d4d; color: #808080";var g=e.getValue(n,1),m=100*((o+g)/o-1),f='<div class="chart-tooltip"><b>'+u+"</b><br><b>Increase:</b> "+l(m.toFixed(2))+"% ("+l(g)+")</div>";e.setValue(n,3,d),e.setValue(n,2,f),e.setValue(n,1,m)}var h=document.getElementById("simulations-metas"),b=h.innerWidth-2*window.getComputedStyle(h,null).getPropertyValue("padding-left"),p=document.documentElement.clientWidth>=768?b:700,w="#222222",v="#cccccc",y={title:t,backgroundColor:w,chartArea:{top:50,bottom:100,left:150,right:50},hAxis:{gridlines:{count:20},format:"#.#'%'",textStyle:{color:v},title:"% DPS Gain",titleTextStyle:{color:v},viewWindowMode:"maximized",viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:v},titleTextStyle:{color:v}},annotations:{highContrast:!1,stem:{color:"transparent",length:-12},textStyle:{fontName:'"Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:10,bold:!0,color:w,auraColor:"transparent"}},titleTextStyle:{color:v},tooltip:{isHtml:!0},legend:{position:"none"},isStacked:!0,width:p};new google.visualization.BarChart(document.getElementById("google-chart")).draw(c(e),y),a(),s(y.chartArea)})})},e.relicsInit=function(e,t,o){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){$.get("/"+e,function(e){var n,r;(e=new google.visualization.arrayToDataTable(e)).sort({column:5,desc:!0});var i=["Weapon Item Level","% DPS Gain"];for(e=function(e,t){var o,n,r;for(o=0;o<t.length;o++)for(r=0;r<e.getNumberOfRows();r++)if(e.getValue(r,0)==t[o]){if(0!=r){for(e.insertRows(0,1),r+=1,e.setRowProperties(0,e.getRowProperties(r)),n=0;n<e.getNumberOfColumns();n++)e.setValue(0,n,e.getValue(r,n));e.removeRow(r)}break}return e}(e,i),n=2;n<e.getNumberOfColumns();n+=2)e.setColumnProperties(n,{type:"string",role:"annotation"});for(n=3;n<=e.getNumberOfColumns();n+=4)e.insertColumn(n,{type:"string",role:"tooltip",p:{html:!0}}),e.insertColumn(n+1,{type:"string",role:"style"});var d=["Light Speed","Infusion of Light","Secure in the Light","Shocklight"],u=["Master of Shadows","Murderous Intent","Shadowbind","Torment the Weak","Chaotic Darkness","Dark Sorrows"];for(r=0;r<e.getNumberOfRows();r++){var g="",m=e.getValue(r,0);m==i[1]?g="stroke-width: 1; stroke-color: #808080; color: #b3b3b3":m==i[0]?g="stroke-width: 0.5; stroke-color: #4d4d4d; color: #808080":$.inArray(m,d)>=0?g="stroke-width: 3; stroke-color: #bb8800; color: #ffcc00":$.inArray(m,u)>=0&&(g="stroke-width: 3; stroke-color: #5500aa; color: #8800ff");var f=0,h=0;for(n=1;n<e.getNumberOfColumns();n+=4){var b=e.getValue(r,n),p=b-h,w=100*((o+b)/o-1),v=w-f,y='<div class="chart-tooltip"><b>'+e.getValue(r,n+1)+"x "+m+"</b><br><b>Total:</b> "+l(w.toFixed(2))+"% ("+l(b.toFixed())+")<br><b>Increase:</b> "+l(v.toFixed(2))+"% ("+l(p.toFixed())+")</div>";e.setValue(r,n+2,y),e.setValue(r,n+3,g),e.setValue(r,n,v),v<0&&(e.setValue(r,n,0),e.setValue(r,n+1,"")),f=w>f?w:f,h=b>h?b:h}}var x=e.addColumn("number");for(r=0;r<e.getNumberOfRows();r++)$.inArray(e.getValue(r,0),d)>=0||$.inArray(e.getValue(r,0),u)>=0?e.setValue(r,x,1):e.setValue(r,x,0);e.sort([{column:x,desc:!1}]),e.removeColumn(x);var C=document.getElementById("simulations-metas"),S=C.innerWidth-2*window.getComputedStyle(C,null).getPropertyValue("padding-left"),k=document.documentElement.clientWidth>=768?S:700,A="#222222",V="#cccccc",I={title:t,backgroundColor:A,chartArea:{top:50,bottom:100,left:150,right:50},hAxis:{gridlines:{count:20},format:"#.#'%'",textStyle:{color:V},title:"% DPS Gain",titleTextStyle:{color:V},viewWindowMode:"maximized",viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:V},titleTextStyle:{color:V}},annotations:{highContrast:!1,stem:{color:"transparent",length:-12},textStyle:{fontName:'"Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:10,bold:!0,color:A,auraColor:"transparent"}},titleTextStyle:{color:V},tooltip:{isHtml:!0},legend:{position:"none"},isStacked:!0,width:k};new google.visualization.BarChart(document.getElementById("google-chart")).draw(c(e),I),a(),s(I.chartArea)})})},e.trinketsInit=function(e,t,o){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){$.get("/"+e,function(e){var n,r,i=(e=new google.visualization.arrayToDataTable(e)).addColumn("number");for(r=0;r<e.getNumberOfRows();r++){var d=0;for(n=1;n<i;n++)e.getValue(r,n)>d&&(d=e.getValue(r,n));e.setValue(r,i,d)}for(e.sort([{column:i,desc:!0}]),e.removeColumn(i),n=2;n<=e.getNumberOfColumns();n+=2)e.insertColumn(n,{type:"string",role:"tooltip",p:{html:!0}});for(r=0;r<e.getNumberOfRows();r++){var u=0,g=0;for(n=1;n<e.getNumberOfColumns();n+=2){var m=e.getValue(r,n),f=m-g,h=100*((o+m)/o-1),b=h-u,p='<div class="chart-tooltip"><b>'+e.getValue(r,0)+"<br> Item Level "+e.getColumnLabel(n)+"</b><br><b>Total:</b> "+l(h.toFixed(2))+"% ("+l(m.toFixed())+")<br><b>Increase:</b> "+l(b.toFixed(2))+"% ("+l(f.toFixed())+")</div>";e.setValue(r,n+1,p),e.setValue(r,n,b),u=h>u?h:u,g=m>g?m:g}}var w=document.getElementById("simulations-metas"),v=w.innerWidth-2*window.getComputedStyle(w,null).getPropertyValue("padding-left"),y=document.documentElement.clientWidth>=768?v:700,x="#cccccc",C={title:t,backgroundColor:"#222222",chartArea:{top:50,bottom:100,right:150,left:200},hAxis:{gridlines:{count:20},format:"#.#'%'",textStyle:{color:x},title:"% DPS Gain",titleTextStyle:{color:x},viewWindowMode:"maximized",viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:x},titleTextStyle:{color:x}},legend:{textStyle:{color:x}},titleTextStyle:{color:x},tooltip:{isHtml:!0},isStacked:!0,width:y};new google.visualization.BarChart(document.getElementById("google-chart")).draw(c(e),C),a(),s(C.chartArea)})})},e.hasInitialized=!0,window.herodamage=e);function l(e){return new Intl.NumberFormat("en-US").format(e)}function a(){var e=document.getElementById("herodamage-loading");e.parentNode.removeChild(e)}function c(e){var t=new google.visualization.DataView(e),o=t.getFilteredRows([{column:1,value:null}]);return t.hideRows(o),t.toDataTable()}function s(e){var t=document.getElementById("google-chart"),o=document.getElementById("chart-overlay");t.onmousemove=function(n){var r=t.getBoundingClientRect(),i=r.left+e.left+window.scrollX,l=r.right-e.right+window.scrollX,a=r.top+e.top+window.scrollY,c=r.bottom-e.bottom+window.scrollY;n.pageX>=i&&n.pageX<=l&&n.pageY>=a&&n.pageY<=c?(o.style.display="block",o.style.top=a+"px",o.style.left=n.pageX+"px",o.style.height=t.offsetHeight-e.top-e.bottom+"px"):o.style.display="none"}}}(window.herodamage||{});