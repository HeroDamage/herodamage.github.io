(function(e){function t(e){return new Intl.NumberFormat("en-US").format(e)}function o(e){var t=new google.visualization.DataView(e),o=t.getFilteredRows([{column:1,value:null}]);return t.hideRows(o),t.toDataTable()}function n(){var e=document.getElementById("herodamage-loading");e.parentNode.removeChild(e)}e.hasInitialized||(e.copyToClipboard=function(e){var t=document.getElementById(e);t.select(),document.execCommand("Copy")},function(){var o,r,a,l=!1;e.combinationsUpdate=function(){if(o){var e=document.getElementById("combinations-table-filter-talents").value,n=new RegExp("^"+e.replace(new RegExp("x|\\*","ig"),"[0-3]"),"i"),i=r.val(),s=a.val(),c=$.grep(o,function(t){if(""!==e&&!n.test(t[1]))return!1;if(i.indexOf(t[2])<0)return!1;var o=t[3].split(", ");return!($(s).filter(o).length<o.length&&"None"!==t[3])}),d=document.getElementById("combinations-table-data"),u=$(document.getElementById("combinations-table-nav"));u.data("twbs-pagination")&&u.twbsPagination("destroy"),u.twbsPagination({totalPages:Math.max(1,Math.ceil(c.length/15)),visiblePages:3,onPageClick:function(e,o){var n="";c.slice(15*(o-1),15*o).forEach(function(e){n+="<tr>",n+="<td>"+e[0]+"</td>",n+="<td>"+e[1]+"</td>",n+="<td>"+e[2]+"</td>",n+="<td>"+e[3]+"</td>",n+="<td>"+t(e[4])+"</td>",l&&(n+="<td>",6===e.length&&(n+=t(e[5])),n+="</td>"),n+="</tr>"}),d.innerHTML=n}})}},e.combinationsInit=function(t){$.get("/"+t,function(t){var i,s=[],c=[];o=t,o.forEach(function(e){$.inArray(e[2],s)<0&&s.push(e[2]),e[3].split(", ").forEach(function(e){"None"!==e&&$.inArray(e,c)<0&&c.push(e)}),l||6!==e.length||(l=!0)}),s.sort().reverse(),s.forEach(function(e){document.getElementById("combinations-table-filter-sets").insertAdjacentHTML("beforeend","<option>"+e+"</option>")}),r=$("#combinations-table-filter-sets"),r.selectpicker("val",s),r.selectpicker("refresh"),c.sort(),c.forEach(function(e){document.getElementById("combinations-table-filter-legendaries").insertAdjacentHTML("beforeend","<option>"+e+"</option>")}),a=$("#combinations-table-filter-legendaries"),i=c.indexOf("Cinidaria"),i>-1&&c.splice(i,1),a.selectpicker("val",c),a.selectpicker("refresh"),l&&(document.getElementById("combinations-table-headers").insertAdjacentHTML("beforeend","<th>Boss DPS</th>"),document.getElementById("combinations-table-filters").insertAdjacentHTML("beforeend","<th></th>")),e.combinationsUpdate(),n()})}}(),e.relicsInit=function(e,r){function a(){$.get("/"+e,function(e){var a,l,e=new google.visualization.arrayToDataTable(e);for(e.sort([{column:e.getNumberOfColumns()-1,desc:!0},{column:5,desc:!0}]),a=2;a<e.getNumberOfColumns();a+=2)e.setColumnProperties(a,{type:"string",role:"annotation"});for(a=3;a<=e.getNumberOfColumns();a+=4)e.insertColumn(a,{type:"string",role:"tooltip",p:{html:!0}}),e.insertColumn(a+1,{type:"string",role:"style"});var i=["Light Speed","Infusion of Light","Secure in the Light","Shocklight"],s=["Master of Shadows","Murderous Intent","Shadowbind","Torment the Weak","Chaotic Darkness","Dark Sorrows"];for(l=0;l<e.getNumberOfRows();l++){var c="";$.inArray(e.getValue(l,0),i)>=0?c="stroke-width: 4; stroke-color: #bb8800; color: #ffcc00":$.inArray(e.getValue(l,0),s)>=0&&(c="stroke-width: 4; stroke-color: #5500aa; color: #8800ff");var d=0;for(a=1;a<e.getNumberOfColumns();a+=4){var u=e.getValue(l,a),g=u-d,m='<div class="chart-tooltip"><b>'+e.getValue(l,a+1)+"x "+e.getValue(l,0)+"</b><br><b>Total:</b> "+t(u.toFixed())+"<br><b>Increase:</b> "+t(g.toFixed())+"</div>";e.setValue(l,a+2,m),e.setValue(l,a+3,c),e.setValue(l,a,g),g<0&&(e.setValue(l,a,0),e.setValue(l,a+1,"")),d=u>d?u:d}}var f=e.addColumn("number");for(l=0;l<e.getNumberOfRows();l++)$.inArray(e.getValue(l,0),i)>=0||$.inArray(e.getValue(l,0),s)>=0?e.setValue(l,f,1):e.setValue(l,f,0);e.sort([{column:f,desc:!1}]),e.removeColumn(f);var b=document.getElementById("fightstyle-tabs"),h=b.innerWidth-2*window.getComputedStyle(b,null).getPropertyValue("padding-left"),p=document.documentElement.clientWidth>=768?h:700,y="#222",v="#CCC",w={title:r,backgroundColor:y,chartArea:{top:50,bottom:100,left:150,right:50},hAxis:{gridlines:{count:20},format:"short",textStyle:{color:v},title:"DPS Increase",titleTextStyle:{color:v},viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:v},titleTextStyle:{color:v}},annotations:{textStyle:{fontSize:10},alwaysOutside:!0,stem:{length:-10,color:"transparent"}},titleTextStyle:{color:v},tooltip:{isHtml:!0},legend:{position:"none"},isStacked:!0,width:p},C=new google.visualization.BarChart(document.getElementById("google-chart"));C.draw(o(e),w),n()})}google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(a)},e.trinketsInit=function(e,r){function a(){$.get("/"+e,function(e){var a,l,e=new google.visualization.arrayToDataTable(e),i=e.addColumn("number");for(l=0;l<e.getNumberOfRows();l++){var s=0;for(a=1;a<i;a++)e.getValue(l,a)>s&&(s=e.getValue(l,a));e.setValue(l,i,s)}for(e.sort([{column:i,desc:!0}]),e.removeColumn(i),a=2;a<=e.getNumberOfColumns();a+=2)e.insertColumn(a,{type:"string",role:"tooltip",p:{html:!0}});for(l=0;l<e.getNumberOfRows();l++){var c=0;for(a=1;a<e.getNumberOfColumns();a+=2){var d=e.getValue(l,a),u=d-c,g='<div class="chart-tooltip"><b>'+e.getValue(l,0)+"<br> Item Level "+e.getColumnLabel(a)+"</b><br><b>Total:</b> "+t(d.toFixed())+"<br><b>Increase:</b> "+t(u.toFixed())+"</div>";e.setValue(l,a+1,g),e.setValue(l,a,u),c=d>c?d:c}}var m=document.getElementById("fightstyle-tabs"),f=m.innerWidth-2*window.getComputedStyle(m,null).getPropertyValue("padding-left"),b=document.documentElement.clientWidth>=768?f:700,h="#222",p="#CCC",y={title:r,backgroundColor:h,chartArea:{top:50,bottom:100,right:150,left:200},hAxis:{gridlines:{count:20},format:"short",textStyle:{color:p},title:"DPS Increase",titleTextStyle:{color:p},viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:p},titleTextStyle:{color:p}},legend:{textStyle:{color:p}},titleTextStyle:{color:p},tooltip:{isHtml:!0},isStacked:!0,width:b},v=new google.visualization.BarChart(document.getElementById("google-chart"));v.draw(o(e),y),n()})}google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(a)},e.hasInitialized=!0,window.herodamage=e)})(window.herodamage||{});