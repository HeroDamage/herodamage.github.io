(function(e){function t(e){return new Intl.NumberFormat("en-US").format(e)}e.hasInitialized||(e.copyToClipboard=function(e){var t=document.getElementById(e);t.select(),document.execCommand("Copy")},function(){var o,n=!1;e.combinationsUpdate=function(){if(o){var e=document.getElementById("combinations-table-filter-talents").value,a=new RegExp("^"+e.replace(new RegExp("x|\\*","ig"),"[0-3]"),"i"),i=$("#combinations-table-filter-sets").val(),l=$("#combinations-table-filter-legendaries").val(),r=$.grep(o,function(t){if(""!==e&&!a.test(t[1]))return!1;if(i.indexOf(t[2])<0)return!1;var o=t[3].split(", ");return!($(l).filter(o).length<o.length&&"None"!==t[3])}),s=document.getElementById("combinations-table-data"),c=$(document.getElementById("combinations-table-nav"));c.data("twbs-pagination")&&c.twbsPagination("destroy"),c.twbsPagination({totalPages:Math.max(1,Math.ceil(r.length/15)),visiblePages:3,onPageClick:function(e,o){var a="";r.slice(15*(o-1),15*o).forEach(function(e){a+="<tr>",a+="<td>"+e[0]+"</td>",a+="<td>"+e[1]+"</td>",a+="<td>"+e[2]+"</td>",a+="<td>"+e[3]+"</td>",a+="<td>"+t(e[4])+"</td>",n&&(a+="<td>",6===e.length&&(a+=t(e[5])),a+="</td>"),a+="</tr>"}),s.innerHTML=a}})}},e.combinationsInit=function(t){$.get("/"+t,function(t){o=t;var a=[],i=[];o.forEach(function(e){$.inArray(e[2],a)<0&&a.push(e[2]),e[3].split(", ").forEach(function(e){"None"!==e&&$.inArray(e,i)<0&&i.push(e)}),n||6!==e.length||(n=!0)}),a.sort().reverse(),a.forEach(function(e){document.getElementById("combinations-table-filter-sets").insertAdjacentHTML("beforeend","<option>"+e+"</option>")});var l=$("#combinations-table-filter-sets");l.selectpicker("val",a),l.selectpicker("refresh"),i.sort(),i.forEach(function(e){document.getElementById("combinations-table-filter-legendaries").insertAdjacentHTML("beforeend","<option>"+e+"</option>")});var r=$("#combinations-table-filter-legendaries"),s=i.indexOf("Cinidaria");s>-1&&i.splice(s,1),r.selectpicker("val",i),r.selectpicker("refresh"),n&&(document.getElementById("combinations-table-headers").insertAdjacentHTML("beforeend","<th>Boss DPS</th>"),document.getElementById("combinations-table-filters").insertAdjacentHTML("beforeend","<th></th>")),e.combinationsUpdate(),$(document.getElementById("combinations-loading")).remove()})}}(),e.relicsInit=function(e,o){function n(e){var t=new google.visualization.DataView(e),o=t.getFilteredRows([{column:1,value:null}]);return t.hideRows(o),t.toDataTable()}function a(){$.get("/"+e,function(e){var a,i,e=new google.visualization.arrayToDataTable(e);for(e.sort([{column:e.getNumberOfColumns()-1,desc:!0},{column:5,desc:!0}]),a=2;a<e.getNumberOfColumns();a+=2)e.setColumnProperties(a,{type:"string",role:"annotation"});for(a=3;a<=e.getNumberOfColumns();a+=4)e.insertColumn(a,{type:"string",role:"tooltip",p:{html:!0}}),e.insertColumn(a+1,{type:"string",role:"style"});var l=["Light Speed","Infusion of Light","Secure in the Light","Shocklight"],r=["Master of Shadows","Murderous Intent","Shadowbind","Torment the Weak","Chaotic Darkness","Dark Sorrows"];for(i=0;i<e.getNumberOfRows();i++){var s="";$.inArray(e.getValue(i,0),l)>=0?s="stroke-width: 4; stroke-color: #bb8800; color: #ffcc00":$.inArray(e.getValue(i,0),r)>=0&&(s="stroke-width: 4; stroke-color: #5500aa; color: #8800ff");var c=0;for(a=1;a<e.getNumberOfColumns();a+=4){var u=e.getValue(i,a),d=u-c,g='<div class="chart-tooltip"><b>'+e.getValue(i,a+1)+"x "+e.getValue(i,0)+"</b><br><b>Total:</b> "+t(u.toFixed())+"<br><b>Increase:</b> "+t(d.toFixed())+"</div>";e.setValue(i,a+2,g),e.setValue(i,a+3,s),e.setValue(i,a,d),d<0&&(e.setValue(i,a,0),e.setValue(i,a+1,"")),c=u>c?u:c}}var m=e.addColumn("number");for(i=0;i<e.getNumberOfRows();i++)$.inArray(e.getValue(i,0),l)>=0||$.inArray(e.getValue(i,0),r)>=0?e.setValue(i,m,1):e.setValue(i,m,0);e.sort([{column:m,desc:!1}]),e.removeColumn(m);var f=document.getElementById("fightstyle-tabs"),b=f.innerWidth-2*window.getComputedStyle(f,null).getPropertyValue("padding-left"),h=document.documentElement.clientWidth>=768?b:700,v="#222",p="#CCC",y={title:o,backgroundColor:v,chartArea:{top:50,bottom:100,left:150,right:50},hAxis:{gridlines:{count:20},format:"short",textStyle:{color:p},title:"DPS Increase",titleTextStyle:{color:p},viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:p},titleTextStyle:{color:p}},annotations:{textStyle:{fontSize:10},alwaysOutside:!0,stem:{length:-10,color:"transparent"}},titleTextStyle:{color:p},tooltip:{isHtml:!0},legend:{position:"none"},isStacked:!0,width:h},w=new google.visualization.BarChart(document.getElementById("google-chart"));w.draw(n(e),y)})}google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(a)},e.trinketsInit=function(e,o){function n(e){var t=new google.visualization.DataView(e),o=t.getFilteredRows([{column:1,value:null}]);return t.hideRows(o),t.toDataTable()}function a(){$.get("/"+e,function(e){var a,i,e=new google.visualization.arrayToDataTable(e),l=e.addColumn("number");for(i=0;i<e.getNumberOfRows();i++){var r=0;for(a=1;a<l;a++)e.getValue(i,a)>r&&(r=e.getValue(i,a));e.setValue(i,l,r)}for(e.sort([{column:l,desc:!0}]),e.removeColumn(l),a=2;a<=e.getNumberOfColumns();a+=2)e.insertColumn(a,{type:"string",role:"tooltip",p:{html:!0}});for(i=0;i<e.getNumberOfRows();i++){var s=0;for(a=1;a<e.getNumberOfColumns();a+=2){var c=e.getValue(i,a),u=c-s,d='<div class="chart-tooltip"><b>'+e.getValue(i,0)+"<br> Item Level "+e.getColumnLabel(a)+"</b><br><b>Total:</b> "+t(c.toFixed())+"<br><b>Increase:</b> "+t(u.toFixed())+"</div>";e.setValue(i,a+1,d),e.setValue(i,a,u),s=c>s?c:s}}var g=document.getElementById("fightstyle-tabs"),m=g.innerWidth-2*window.getComputedStyle(g,null).getPropertyValue("padding-left"),f=document.documentElement.clientWidth>=768?m:700,b="#222",h="#CCC",v={title:o,backgroundColor:b,chartArea:{top:50,bottom:100,right:150,left:200},hAxis:{gridlines:{count:20},format:"short",textStyle:{color:h},title:"DPS Increase",titleTextStyle:{color:h},viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:h},titleTextStyle:{color:h}},legend:{textStyle:{color:h}},titleTextStyle:{color:h},tooltip:{isHtml:!0},isStacked:!0,width:f},p=new google.visualization.BarChart(document.getElementById("google-chart"));p.draw(n(e),v)})}google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(a)},e.hasInitialized=!0,window.herodamage=e)})(window.herodamage||{});