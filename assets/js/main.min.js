(function(e){function t(e){return new Intl.NumberFormat("en-US").format(e)}e.hasInitialized||(e.copyToClipboard=function(e){var t=document.getElementById(e);t.select(),document.execCommand("Copy")},function(){var o,n=!1;e.combinationsUpdate=function(){if(o){var e=document.getElementById("combinations-table-filter-talents").value,a=new RegExp("^"+e.replace(new RegExp("x|\\*","ig"),"[0-3]"),"i"),r=$("#combinations-table-filter-sets").val(),i=$("#combinations-table-filter-legendaries").val(),l=$.grep(o,function(t){if(""!==e&&!a.test(t[1]))return!1;if(r.indexOf(t[2])<0)return!1;var o=t[3].split(", ");return!($(i).filter(o).length<o.length&&"None"!==t[3])}),s=document.getElementById("combinations-table-data"),c=$(document.getElementById("combinations-table-nav"));c.data("twbs-pagination")&&c.twbsPagination("destroy"),c.twbsPagination({totalPages:Math.max(1,Math.ceil(l.length/15)),visiblePages:3,onPageClick:function(e,o){var a="";l.slice(15*(o-1),15*o).forEach(function(e){a+="<tr>",a+="<td>"+e[0]+"</td>",a+="<td>"+e[1]+"</td>",a+="<td>"+e[2]+"</td>",a+="<td>"+e[3]+"</td>",a+="<td>"+t(e[4])+"</td>",n&&(a+="<td>",6===e.length&&(a+=t(e[5])),a+="</td>"),a+="</tr>"}),s.innerHTML=a}})}},e.combinationsInit=function(t){$.get("/"+t,function(t){o=t;var a=[],r=[];o.forEach(function(e){$.inArray(e[2],a)<0&&a.push(e[2]),e[3].split(", ").forEach(function(e){"None"!==e&&$.inArray(e,r)<0&&r.push(e)}),n||6!==e.length||(n=!0)}),a.sort().reverse(),a.forEach(function(e){document.getElementById("combinations-table-filter-sets").insertAdjacentHTML("beforeend","<option>"+e+"</option>")});var i=$("#combinations-table-filter-sets");i.selectpicker("val",a),i.selectpicker("refresh"),r.sort(),r.forEach(function(e){document.getElementById("combinations-table-filter-legendaries").insertAdjacentHTML("beforeend","<option>"+e+"</option>")});var l=$("#combinations-table-filter-legendaries"),s=r.indexOf("Cinidaria");s>-1&&r.splice(s,1),l.selectpicker("val",r),l.selectpicker("refresh"),n&&(document.getElementById("combinations-table-headers").insertAdjacentHTML("beforeend","<th>Boss DPS</th>"),document.getElementById("combinations-table-filters").insertAdjacentHTML("beforeend","<th></th>")),e.combinationsUpdate(),$(document.getElementById("combinations-loading")).remove()})}}(),e.relicsInit=function(e,o,n){function a(e){var t=new google.visualization.DataView(e),o=t.getFilteredRows([{column:1,value:null}]);return t.hideRows(o),t.toDataTable()}function r(){for(var t=["string"],o=0;o<n;o++)t.push("number"),t.push("string");var a=new google.visualization.Query("/"+e,{csvColumns:t,csvHasHeader:!1});a.send(i)}function i(e){if(e.isError())return void alert("Error in query: "+e.getMessage()+" "+e.getDetailedMessage());var n,r,i=e.getDataTable();for(i.sort([{column:i.getNumberOfColumns()-1,desc:!0},{column:5,desc:!0}]),n=2;n<i.getNumberOfColumns();n+=2)i.setColumnProperties(n,{type:"string",role:"annotation"});for(n=3;n<=i.getNumberOfColumns();n+=4)i.insertColumn(n,{type:"string",role:"tooltip",p:{html:!0}}),i.insertColumn(n+1,{type:"string",role:"style"});var l=["LightSpeed","InfusionOfLight","SecureInTheLight","Shocklight"],s=["MasterOfShadows","MurderousIntent","Shadowbind","TormentTheWeak","ChaoticDarkness","DarkSorrows"];for(r=0;r<i.getNumberOfRows();r++){var c="";$.inArray(i.getValue(r,0),l)>=0?c="stroke-width: 4; stroke-color: #bb8800; color: #ffcc00":$.inArray(i.getValue(r,0),s)>=0&&(c="stroke-width: 4; stroke-color: #5500aa; color: #8800ff");var u=0;for(n=1;n<i.getNumberOfColumns();n+=4){var d=i.getValue(r,n),g=d-u,m='<div class="chart-tooltip"><b>'+i.getValue(r,n+1)+"x "+i.getValue(r,0)+"</b><br><b>Total:</b> "+t(d.toFixed())+"<br><b>Increase:</b> "+t(g.toFixed())+"</div>";i.setValue(r,n+2,m),i.setValue(r,n+3,c),i.setValue(r,n,g),g<0&&(i.setValue(r,n,0),i.setValue(r,n+1,"")),u=d>u?d:u}}var f=i.addColumn("number");for(r=0;r<i.getNumberOfRows();r++)$.inArray(i.getValue(r,0),l)>=0||$.inArray(i.getValue(r,0),s)>=0?i.setValue(r,f,1):i.setValue(r,f,0);i.sort([{column:f,desc:!1}]),i.removeColumn(f);var b=document.getElementById("fightstyle-tabs"),h=b.innerWidth-2*window.getComputedStyle(b,null).getPropertyValue("padding-left"),v=document.documentElement.clientWidth>=768?h:700,p="#222",y="#CCC",w={title:o,backgroundColor:p,chartArea:{top:50,bottom:100,left:150,right:50},hAxis:{gridlines:{count:20},format:"short",textStyle:{color:y},title:"DPS Increase",titleTextStyle:{color:y},viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:y},titleTextStyle:{color:y}},annotations:{textStyle:{fontSize:10},alwaysOutside:!0,stem:{length:-10,color:"transparent"}},titleTextStyle:{color:y},tooltip:{isHtml:!0},legend:{position:"none"},isStacked:!0,width:v},C=new google.visualization.BarChart(document.getElementById("google-chart"));C.draw(a(i),w)}google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(r)},e.trinketsInit=function(e,o){function n(e){var t=new google.visualization.DataView(e),o=t.getFilteredRows([{column:1,value:null}]);return t.hideRows(o),t.toDataTable()}function a(){$.get("/"+e,function(e){arrayData=e;var a,r,e=new google.visualization.arrayToDataTable(arrayData),i=e.addColumn("number");for(r=0;r<e.getNumberOfRows();r++){var l=0;for(a=1;a<i;a++)e.getValue(r,a)>l&&(l=e.getValue(r,a));e.setValue(r,i,l)}for(e.sort([{column:i,desc:!0}]),e.removeColumn(i),a=2;a<=e.getNumberOfColumns();a+=2)e.insertColumn(a,{type:"string",role:"tooltip",p:{html:!0}});for(r=0;r<e.getNumberOfRows();r++){var s=0;for(a=1;a<e.getNumberOfColumns();a+=2){var c=e.getValue(r,a),u=c-s,d='<div class="chart-tooltip"><b>'+e.getValue(r,0)+"<br> Item Level "+e.getColumnLabel(a)+"</b><br><b>Total:</b> "+t(c.toFixed())+"<br><b>Increase:</b> "+t(u.toFixed())+"</div>";e.setValue(r,a+1,d),e.setValue(r,a,u),s=c>s?c:s}}var g=document.getElementById("fightstyle-tabs"),m=g.innerWidth-2*window.getComputedStyle(g,null).getPropertyValue("padding-left"),f=document.documentElement.clientWidth>=768?m:700,b="#222",h="#CCC",v={title:o,backgroundColor:b,chartArea:{top:50,bottom:100,right:150,left:200},hAxis:{gridlines:{count:20},format:"short",textStyle:{color:h},title:"DPS Increase",titleTextStyle:{color:h},viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:h},titleTextStyle:{color:h}},legend:{textStyle:{color:h}},titleTextStyle:{color:h},tooltip:{isHtml:!0},isStacked:!0,width:f},p=new google.visualization.BarChart(document.getElementById("google-chart"));p.draw(n(e),v)})}google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(a)},e.hasInitialized=!0,window.herodamage=e)})(window.herodamage||{});