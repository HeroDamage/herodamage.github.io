!function(e){e.hasInitialized||(e.copyToClipboard=function(e){document.getElementById(e).select(),document.execCommand("Copy")},function(){var n,r,a,i=!1;e.combinationsUpdate=function(){if(n){var e=document.getElementById("combinations-table-filter-talents").value,o=new RegExp("^"+e.replace(new RegExp("x|\\*","ig"),"[0-3]"),"i"),l=r.val(),s=a.val(),c=$.grep(n,function(t){if(""!==e&&!o.test(t[1]))return!1;if(l.indexOf(t[2])<0)return!1;var n=t[3].split(", ");return!($(s).filter(n).length<n.length&&"None"!==t[3])}),d=document.getElementById("combinations-table-data"),u=$(document.getElementById("combinations-table-nav"));u.data("twbs-pagination")&&u.twbsPagination("destroy"),u.twbsPagination({totalPages:Math.max(1,Math.ceil(c.length/15)),visiblePages:3,onPageClick:function(e,o){var n="";c.slice(15*(o-1),15*o).forEach(function(e){n+="<tr>",n+="<td>"+e[0]+"</td>",n+="<td>"+e[1]+"</td>",n+="<td>"+e[2]+"</td>",n+="<td>"+e[3]+"</td>",n+="<td>"+t(e[4])+"</td>",i&&(n+="<td>",6===e.length&&(n+=t(e[5])),n+="</td>"),n+="</tr>"}),d.innerHTML=n}})}},e.combinationsInit=function(t){$.get("/"+t,function(t){var l,s=[],c=[];(n=t).forEach(function(e){$.inArray(e[2],s)<0&&s.push(e[2]),e[3].split(", ").forEach(function(e){"None"!==e&&$.inArray(e,c)<0&&c.push(e)}),i||6!==e.length||(i=!0)}),s.sort().reverse(),s.forEach(function(e){document.getElementById("combinations-table-filter-sets").insertAdjacentHTML("beforeend","<option>"+e+"</option>")}),(r=$("#combinations-table-filter-sets")).selectpicker("val",s),r.selectpicker("refresh"),c.sort(),c.forEach(function(e){document.getElementById("combinations-table-filter-legendaries").insertAdjacentHTML("beforeend","<option>"+e+"</option>")}),a=$("#combinations-table-filter-legendaries"),(l=c.indexOf("Cinidaria"))>-1&&c.splice(l,1),a.selectpicker("val",c),a.selectpicker("refresh"),i&&(document.getElementById("combinations-table-headers").insertAdjacentHTML("beforeend","<th>Boss DPS</th>"),document.getElementById("combinations-table-filters").insertAdjacentHTML("beforeend","<th></th>")),e.combinationsUpdate(),o()})}}(),e.relicsInit=function(e,r){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){$.get("/"+e,function(e){var a,i;for((e=new google.visualization.arrayToDataTable(e)).sort({column:5,desc:!0}),e=function(e,t){var o,n,r;for(o=0;o<t.length;o++)for(r=0;r<e.getNumberOfRows();r++)if(e.getValue(r,0)==t[o]){if(0!=r){for(e.insertRows(0,1),r+=1,e.setRowProperties(0,e.getRowProperties(r)),n=0;n<e.getNumberOfColumns();n++)e.setValue(0,n,e.getValue(r,n));e.removeRow(r)}break}return e}(e,["Weapon Item Level","% DPS Gain"]),a=2;a<e.getNumberOfColumns();a+=2)e.setColumnProperties(a,{type:"string",role:"annotation"});for(a=3;a<=e.getNumberOfColumns();a+=4)e.insertColumn(a,{type:"string",role:"tooltip",p:{html:!0}}),e.insertColumn(a+1,{type:"string",role:"style"});var l=["Light Speed","Infusion of Light","Secure in the Light","Shocklight"],s=["Master of Shadows","Murderous Intent","Shadowbind","Torment the Weak","Chaotic Darkness","Dark Sorrows"];for(i=0;i<e.getNumberOfRows();i++){var c="";$.inArray(e.getValue(i,0),l)>=0?c="stroke-width: 4; stroke-color: #bb8800; color: #ffcc00":$.inArray(e.getValue(i,0),s)>=0&&(c="stroke-width: 4; stroke-color: #5500aa; color: #8800ff");var d=0;for(a=1;a<e.getNumberOfColumns();a+=4){var u=e.getValue(i,a),g=u-d,m='<div class="chart-tooltip"><b>'+e.getValue(i,a+1)+"x "+e.getValue(i,0)+"</b><br><b>Total:</b> "+t(u.toFixed())+"<br><b>Increase:</b> "+t(g.toFixed())+"</div>";e.setValue(i,a+2,m),e.setValue(i,a+3,c),e.setValue(i,a,g),g<0&&(e.setValue(i,a,0),e.setValue(i,a+1,"")),d=u>d?u:d}}var f=e.addColumn("number");for(i=0;i<e.getNumberOfRows();i++)$.inArray(e.getValue(i,0),l)>=0||$.inArray(e.getValue(i,0),s)>=0?e.setValue(i,f,1):e.setValue(i,f,0);e.sort([{column:f,desc:!1}]),e.removeColumn(f);var b=document.getElementById("fightstyle-tabs"),h=b.innerWidth-2*window.getComputedStyle(b,null).getPropertyValue("padding-left"),p=document.documentElement.clientWidth>=768?h:700,C="#CCC",v={title:r,backgroundColor:"#222",chartArea:{top:50,bottom:100,left:150,right:50},hAxis:{gridlines:{count:20},format:"short",textStyle:{color:C},title:"DPS Increase",titleTextStyle:{color:C},viewWindowMode:"maximized",viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:C},titleTextStyle:{color:C}},annotations:{highContrast:!1,stem:{color:"transparent",length:-12},textStyle:{fontName:'"Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:10,bold:!0,color:"#222",auraColor:"transparent"}},titleTextStyle:{color:C},tooltip:{isHtml:!0},legend:{position:"none"},isStacked:!0,width:p};new google.visualization.BarChart(document.getElementById("google-chart")).draw(n(e),v),o()})})},e.trinketsInit=function(e,r){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){$.get("/"+e,function(e){var a,i,l=(e=new google.visualization.arrayToDataTable(e)).addColumn("number");for(i=0;i<e.getNumberOfRows();i++){var s=0;for(a=1;a<l;a++)e.getValue(i,a)>s&&(s=e.getValue(i,a));e.setValue(i,l,s)}for(e.sort([{column:l,desc:!0}]),e.removeColumn(l),a=2;a<=e.getNumberOfColumns();a+=2)e.insertColumn(a,{type:"string",role:"tooltip",p:{html:!0}});for(i=0;i<e.getNumberOfRows();i++){var c=0;for(a=1;a<e.getNumberOfColumns();a+=2){var d=e.getValue(i,a),u=d-c,g='<div class="chart-tooltip"><b>'+e.getValue(i,0)+"<br> Item Level "+e.getColumnLabel(a)+"</b><br><b>Total:</b> "+t(d.toFixed())+"<br><b>Increase:</b> "+t(u.toFixed())+"</div>";e.setValue(i,a+1,g),e.setValue(i,a,u),c=d>c?d:c}}var m=document.getElementById("fightstyle-tabs"),f=m.innerWidth-2*window.getComputedStyle(m,null).getPropertyValue("padding-left"),b=document.documentElement.clientWidth>=768?f:700,h={title:r,backgroundColor:"#222",chartArea:{top:50,bottom:100,right:150,left:200},hAxis:{gridlines:{count:20},format:"short",textStyle:{color:"#CCC"},title:"DPS Increase",titleTextStyle:{color:"#CCC"},viewWindowMode:"maximized",viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:"#CCC"},titleTextStyle:{color:"#CCC"}},legend:{textStyle:{color:"#CCC"}},titleTextStyle:{color:"#CCC"},tooltip:{isHtml:!0},isStacked:!0,width:b};new google.visualization.BarChart(document.getElementById("google-chart")).draw(n(e),h),o()})})},e.hasInitialized=!0,window.herodamage=e);function t(e){return new Intl.NumberFormat("en-US").format(e)}function o(){var e=document.getElementById("herodamage-loading");e.parentNode.removeChild(e)}function n(e){var t=new google.visualization.DataView(e),o=t.getFilteredRows([{column:1,value:null}]);return t.hideRows(o),t.toDataTable()}}(window.herodamage||{});